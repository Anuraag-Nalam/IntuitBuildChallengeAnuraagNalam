# Sales Data Analysis Application

This project is a solution for Assignment 2: Data Analysis using Streams.

Project Overview

The application reads sales data from a CSV file and executes 9 distinct analytical queries using the Java Streams API. It showcases:

Functional Programming: Declarative style using lambdas and method references.

Stream Operations: Filtering, mapping, sorting, and limiting data.

Data Aggregation: Complex grouping, summing, counting, and averaging using `Collectors`.

Lambda Expressions: Concise implementation of functional interfaces.

## Analysis Questions Solved

The application solves the following 9 analytical questions:

1.  **Sales by Product Line:** What is the total revenue generated by each product category?
2.  **Revenue by Country:** Which countries generate the most revenue?
3.  **Order Status Counts:** How many orders are in each status (Shipped, Cancelled, etc.)?
4.  **Best Sales Year:** Which year had the highest total sales revenue?
5.  **Monthly Sales Trends:** What is the seasonality of sales (total sales per month)?
6.  **Top 5 Customers:** Who are the top 5 customers by total purchase amount?
7.  **Most Expensive Items:** What are the top 5 most expensive items based on MSRP?
8.  **Average Order Value:** What is the average revenue per sales record?
9.  **Deal Size Analysis:** What is the average sales amount for Small, Medium, and Large deals?

## Dataset Choice & Assumptions

### Why this Dataset?

I have selected the `sales_data_sample.csv` dataset (Auto Sales data) because it provides a rich set of categorical and numerical fields ideal for demonstrating stream capabilities:

- **Categorical Fields:** `PRODUCTLINE`, `COUNTRY`, `DEALSIZE`, `STATUS` allow for diverse grouping scenarios (`groupingBy`).
- **Numerical Fields:** `SALES`, `MSRP`, `QUANTITYORDERED` allow for various aggregation types (Sum, Average, Max).
- **Temporal Data:** `YEAR_ID`, `MONTH_ID` allow for time-based trend analysis.

### Assumptions

1.  **Data Integrity:** We assume the CSV format is consistent and that numerical fields (`SALES`, `MSRP`, `YEAR_ID`) contain valid parseable numbers. Invalid rows are handled gracefully by returning default values (0) during parsing to prevent application crashes.
2.  **Sales Calculation:** The `SALES` column represents the total revenue for that line item.
3.  **Best Sales Year:** Defined as the year with the highest sum of total sales revenue.
4.  **Top Customers:** Ranked by the sum of their total purchases (Sales).
5.  **Deal Size:** The `DEALSIZE` column (Small, Medium, Large) is pre-categorized in the dataset and is used directly for grouping.

## Project Structure

The code is refactored into a modular architecture:

- `com.example.salesanalysis.model`: Contains `SalesRecord` (POJO) representing a single row of data.
- `com.example.salesanalysis.loader`: Contains `CsvDataLoader` for handling file I/O and CSV parsing.
- `com.example.salesanalysis.service`: Contains `SalesAnalysisService` with all business logic and stream operations.
- `com.example.salesanalysis.App`: The main entry point that is responsible for loading and analysis.

## Setup and Run Instructions

### Prerequisites

- Java 11 or higher
- Maven (Optional, for dependency management)

### Option 1: Using Maven (Recommended)

1.  **Build the project:**
    ```bash
    mvn clean install
    ```
2.  **Run the application:**
    ```bash
    mvn exec:java -Dexec.mainClass="com.example.salesanalysis.App"
    ```

### Option 2: Manual Compilation (No Maven)

If you do not have Maven installed, you can compile and run using the provided `lib` folder.

1.  **Compile the source code:**

    ```bash
    javac -d bin -cp "lib/commons-csv-1.10.0.jar" src/main/java/com/example/salesanalysis/model/*.java src/main/java/com/example/salesanalysis/loader/*.java src/main/java/com/example/salesanalysis/service/*.java src/main/java/com/example/salesanalysis/App.java
    ```

2.  **Run the application:**

    ```bash
    java -cp "bin;lib/commons-csv-1.10.0.jar" com.example.salesanalysis.App
    ```

3.  **Run the Tests:**
    ```bash
    java -jar lib/junit-platform-console-standalone-1.9.2.jar -cp "bin;lib/commons-csv-1.10.0.jar" --scan-classpath
    ```

## Sample Output

When running the application, the following results are printed to the console:

```text
Loading data from: src/main/resources/sales_data_sample.csv
Data loaded successfully. Total records: 2823
--------------------------------------------------
1. Sales by Product Line:
   Trains: $226243.47
   Vintage Cars: $1903150.84
   Planes: $975003.57
   Ships: $714437.13
   Motorcycles: $1166388.34
   Trucks and Buses: $1127789.84
   Classic Cars: $3919615.66
--------------------------------------------------
2. Revenue by Country:
   USA: $3627982.83
   Singapore: $288488.41
   Philippines: $94015.73
   Japan: $188167.81
   Switzerland: $117713.56
   Spain: $1215686.92
   Canada: $224078.56
   Sweden: $210014.21
   Austria: $202062.53
   Belgium: $108412.62
   Norway: $307463.70
   Ireland: $57756.43
   UK: $478880.46
   Finland: $329581.91
   Denmark: $245637.15
   Italy: $374674.31
   Australia: $630623.10
   France: $1110916.52
   Germany: $220472.09
--------------------------------------------------
3. Order Status Counts:
   In Process: 41
   On Hold: 44
   Resolved: 47
   Shipped: 2617
   Cancelled: 60
   Disputed: 14
--------------------------------------------------
4. Best Sales Year:
   Year: 2004, Total Sales: $4724162.60
--------------------------------------------------
5. Monthly Sales Trends:
   Month 1: $785874.44
   Month 2: $810441.90
   Month 3: $754501.39
   Month 4: $669390.96
   Month 5: $923972.56
   Month 6: $454756.78
   Month 7: $514875.97
   Month 8: $659310.57
   Month 9: $584724.27
   Month 10: $1121215.22
   Month 11: $2118885.67
   Month 12: $634679.12
--------------------------------------------------
6. Top 5 Customers:
   Euro Shopping Channel: $912294.11
   Mini Gifts Distributors Ltd.: $654858.06
   Australian Collectors, Co.: $200995.41
   Muscle Machine Inc: $197736.94
   La Rochelle Gifts: $180124.90
--------------------------------------------------
7. Most Expensive Items (Top 5 by MSRP):
   S10_1949 (Classic Cars): MSRP $214
   S10_1949 (Classic Cars): MSRP $214
   S10_1949 (Classic Cars): MSRP $214
   S10_1949 (Classic Cars): MSRP $214
   S10_1949 (Classic Cars): MSRP $214
--------------------------------------------------
8. Average Order Value:
   $3553.89
--------------------------------------------------
9. Deal Size Analysis:
   Small: $2061.68
   Medium: $4398.43
   Large: $8293.75
--------------------------------------------------
```
